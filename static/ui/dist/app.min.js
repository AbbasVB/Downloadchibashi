!function(){"use strict";angular.module("core",["ui.bootstrap","ui.router","blockUI","ngNotify","ngFileUpload","ngSanitize"])}(),function(){"use strict";angular.module("media",["core"])}(),function(){"use strict";angular.module("filmjoo",["core","ui.select","ngSanitize"])}(),function(){"use strict";angular.module("stuff",["core"])}(),function(){"use strict";angular.module("user",["core","ui.grid","ui.grid.resizeColumns","ui.grid.pagination","ui.bootstrap"])}(),function(){"use strict";angular.module("core").controller("CoreResetController",["$scope","$uibModalInstance","CoreImpl",function(e,t,o){var n=new o(e,t);e.model={},e.dismissModal=n.dismissModal,e.reset=n.reset}])}(),function(){"use strict";angular.module("core").controller("CoreSignUpController",["$scope","$uibModalInstance","CoreImpl",function(e,t,o){var n=new o(e,t);e.model={},e.dismissModal=n.dismissModal,e.signUp=n.signUp,e.loginIt=n.login,e.passRemeber=n.passRemeber}])}(),function(){"use strict";angular.module("core").controller("CoreController",["$scope","CoreImpl","Settings","ngNotify",function(e,t,o,n){var s=new t(e);o.session&&o.session.reset&&(s.openResetModal(),o.session.reset=null),o.session&&o.session.status&&(n.set(o.session.message,o.session.status),o.session.status=null),o.session&&o.session.feedbacktitle&&s.openAddFeedbackModal(),e.openResetModal=s.openResetModal,e.openSignUpModal=s.openSignUpModal,e.openPurchaseModal=s.openPurchaseModal,e.openAddFeedbackModal=s.openAddFeedbackModal}])}(),function(){"use strict";angular.module("core").factory("Session",["$rootScope","$window",function(e,t){return e.session=t.session,e.session}])}(),function(){"use strict";angular.module("core").filter("trustAsHtml",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]).factory("CoreImpl",["User","$interval","$uibModal","ngNotify",function(n,e,s,i){return function(e,t){var o=function(){n.login(e.model).then(function(e){"ok"==e.status?(t.close(e),i.set(e.message),window.location.assign("#/user"),location.reload()):i.set(e.message,"error")},function(e){i.set(e,"error"),console.log(e)})};return{openResetModal:function(){s.open({size:"sm",templateUrl:"static/ui/modules/core/views/core-reset-modal.html",controller:"CoreResetController"})},openSignUpModal:function(){s.open({size:"sm",templateUrl:"static/ui/modules/core/views/core-sign-up-modal.html",controller:"CoreSignUpController"})},openAddFeedbackModal:function(){s.open({templateUrl:"static/ui/modules/user/views/user-add-feedback.html",controller:"UserAddFeedbackController"}).result.then(function(e){e.status})},dismissModal:function(){t.dismiss()},signUp:function(){e.model.password==e.model.confirmPassword?e.model.email==e.model.confirmEmail?n.signUp(e.model).then(function(e){"ok"==e.status?(i.set(e.message),setTimeout(function(){o()},3e3)):i.set(e.message,"error")},function(e){console.log(e),i.set(e)}):i.set("پست الکترونیکی با تکرار ان مطابقت ندارد","error"):i.set("کلمه عبور با تکرار ان مطابقت ندارد","error")},login:o,reset:function(){e.model.password==e.model.confirmPassword?n.reset(e.model).then(function(e){"ok"==e.status?(i.set(e.message),t.close(e)):i.set(e.message,"error")},function(e){console.log(e),i.set(e)}):i.set("کلمه عبور با تکرار ان مطابقت ندارد","error")},passRemeber:function(){n.passRemeber(e.model).then(function(e){"ok"==e.status?(t.close(e),i.set(e.message)):i.set(e.message,"error")},function(e){i.set(e,"error"),console.log(e)})},openPurchaseModal:function(){s.open({templateUrl:"static/ui/modules/user/views/user-purchase.html",controller:"UserPurchaseController"}).result.then(function(e){console.log(e)})}}}}])}(),function(){"use strict";angular.module("core").factory("Settings",["$rootScope","$window",function(e,t){var o={};return o.session=e.session=t.session,o}])}(),angular.module("core").factory("UriManager",["$q","$http",function(s,i){return function(o){function n(){for(var e=""+o,t=0;t<arguments.length;t++)e+="/"+arguments[t];return e}return{serialize:n,resolve:function(e){var t=s.defer();return i({method:e.method,url:n.apply(this,e.path),data:e.data}).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},devResolve:function(e){switch(n.apply(this,e.path)){case"media/info":return angular.fromJson({status:"ok",object:{multiple:!1,thumb_url:"https://i.ytimg.com/vi/MnFkC1VG8rs/hqdefault.jpg",quality:{17:"3gp - 176x144 (small)",140:"m4a - audio only (DASH audio)",141:"m4a - audio only (DASH audio)",160:"mp4 - 192x144 (DASH video)",36:"3gp - 320x240 (small)",43:"webm - 640x360 (medium)",133:"mp4 - 320x240 (DASH video)",5:"flv - 400x240 (small)",18:"mp4 - 640x360 (medium) (best)",242:"webm - 320x240 (DASH video)",278:"webm - 192x144 (DASH video)",250:"webm - audio only (DASH audio)",251:"webm - audio only (DASH audio)",249:"webm - audio only (DASH audio)",171:"webm - audio only (DASH audio)"},title:"پسر شجاع - ویکیوز"}});case"media/download":return angular.fromJson({status:"ok",object:{url:"https://www.youtube.com/watch?v=MnFkC1VG8rs",name:"844bbc32-e87a-4c24-81cd-f7d1ff3905a3.txt"}});case"media/state/844bbc32-e87a-4c24-81cd-f7d1ff3905a3.txt":var t=20*Math.ceil(5*Math.random());return angular.fromJson({status:"ok",object:{time:"00:00",percent:t,name:"2015-12-16_05:03:57.zip",size:"8.76MiB"}});case"user/signUp":case"user/feedback":case"user/newsletter":return angular.fromJson({status:"ok",message:"your message save successfully"});case"user/downloadsHistory":return angular.fromJson({status:"ok",object:{History:[{title:"test1",url:"http://test1.com",date:"2016",size:"55M"},{title:"test2",url:"http://test2.com",date:"2016",size:"55M"},{title:"test3",url:"http://test3.com",date:"2016",size:"55M"},{title:"test4",url:"http://test4.com",date:"2016",size:"55M"}]}})}}}}}]),function(){"use strict";angular.module("media").config(["$urlRouterProvider","$stateProvider","$locationProvider",function(e,t,o){e.otherwise("/"),t.state("media",{url:"/",templateUrl:"/static/ui/modules/media/views/media-index.html",controller:"MediaController"})}])}(),function(){"use strict";angular.module("media").controller("MediaByUrlController",["$scope","$state","MediaImpl",function(e,t,o){var n=new o(e);e.model={url:t.params.url},e.downloads=[],e.getInfo=n.getInfo,n.getInfo()}])}(),function(){"use strict";angular.module("media").controller("MediaSelectQualityController",["$scope","$uibModalInstance","info","model","MediaImpl",function(o,e,t,n,s){var i=new s(o,e);o.model=n,o.info=t,angular.forEach(t.quality,function(e,t){0<=e.toLowerCase().indexOf("best")&&(o.model.quality=t)}),o.dismissModal=i.dismissModal,o.download=i.download}])}(),function(){"use strict";angular.module("media").controller("MediaZipController",["$scope","$uibModalInstance","MediaImpl",function(e,t,o){var n=new o(e,t);e.model={},e.dismissModal=n.dismissModal}])}(),function(){"use strict";angular.module("media").controller("MediaController",["$scope","MediaImpl","Settings","CoreImpl","$state",function(e,t,o,n,s){var i=new t(e),r=new n(e);e.model={url:o.session?o.session.url:null},e.downloads=o.downloads?o.downloads:[],e.getInfo=function(){if(-1!=e.model.url.indexOf("youtube.")&&(-1!=e.model.url.indexOf("list=")||-1!=e.model.url.indexOf("/channel/")||-1!=e.model.url.indexOf("/user/")))return o.session.feedbacktitle="توجه",o.session.feedbackmessage="<p>شما درخواست دانلود یک لیست و یا کانال ویدیویی را داده اید، دانلود اینگونه موارد در <b>بخش ویژه</b>امکان پذیر است، خواهشا نسبت به ثبت نام در این بخش اقدام بفرمایید</p>",void r.openAddFeedbackModal();i.getInfo()},e.openHistoricSelectQualityModal=i.openHistoricSelectQualityModal,o.session&&o.session.url&&(i.getInfo(),o.session.url=null),e.openZipModal=i.openZipModal}])}(),function(){"use strict";angular.module("media").factory("MediaImpl",["Media","$interval","$uibModal","ngNotify","Settings","CoreImpl",function(i,r,a,l,u,e){var c={};return function(n,s){function t(e,t){a.open({templateUrl:"static/ui/modules/media/views/media-select-quality.html",controller:"MediaSelectQualityController",resolve:{info:function(){return e},model:function(){return angular.copy(t?{url:t}:n.model)}}}).result.then(function(e){n.model={},e.object.title=c[e.object.url].title,n.downloads.unshift(e.object),u.downloads=n.downloads})}var o=new e(n);return{openZipModal:function(){a.open({templateUrl:"static/ui/modules/media/views/media-zip-modal.html",controller:"MediaZipController",resolve:{info:function(){return"Hi"},model:function(){return n.model}}}).result.then(function(e){n.model={}})},getInfo:function(){i.getInfo(n.model).then(function(e){"ok"==e.status?(t(e.object),c[n.model.url]=e.object):"alert"==e.status?(u.session.feedbacktitle="توجه",u.session.feedbackmessage=e.message,o.openAddFeedbackModal()):l.set(e.message,"error")},function(e){l.set("امکان برقراری ارتباط با سرور موجود نمی باشد","error")})},dismissModal:function(){s.dismiss()},openHistoricSelectQualityModal:function(e){t(c[e],e)},download:function(){n.progress={percent:1},i.download(n.model).then(function(e){var t,o;"ok"==e.status?(t=e.object.name,o=r(function(){i.state(t).then(function(e){return"ok"!=e.status?(l.set("متاسفانه مشکلی در روند دانلود بوجود امده، لطفا با مدیر سیستم تماس حاصل بفرمایید","error"),r.cancel(o),o=void 0,void(n.progress=null)):100==e.object.percent&&e.object.name?(r.cancel(o),o=void 0,n.progress=null,void s.close(e)):void(0<e.object.percent&&(n.progress=e.object))})},7e3)):console.log(e.message)},function(e){console.log(e)})}}}}])}(),function(){"use strict";angular.module("media").factory("Media",["UriManager",function(e){var t=new e("media");return{getInfo:function(e){return t.resolve({method:"POST",path:["info"],data:e})},download:function(e){return t.resolve({method:"POST",path:["download"],data:e})},state:function(e){return t.resolve({method:"GET",path:["state",e]})}}}])}(),function(){"use strict";angular.module("filmjoo").config(["$urlRouterProvider","$stateProvider","$locationProvider",function(e,t,o){e.otherwise("/"),t.state("filmjoo",{url:"/filmjoo/:movieid",templateUrl:"static/ui/modules/filmjoo/views/filmjoo-index.html",controller:"FilmjooController"}).state("filmjoogetmovie",{url:"/filmjoo/getmovie/:movieid",templateUrl:"static/ui/modules/filmjoo/views/filmjoo-getmovie.html",controller:"FilmjooGetMovieController"})}])}(),function(){"use strict";angular.module("filmjoo").controller("FilmjooController",["$scope","$http","$state","ngNotify","Settings","$stateParams",function(o,n,t,s,e,i){i.movieid&&n.get("/filmjoo/get_movie/"+i.movieid).then(function(e){o.result=JSON.parse(e.data.object)}),o.getinfo=function(e){t.go("filmjoogetmovie",{movieid:e})},o.searchit=function(){n.get("filmjoo/search/"+o.search).then(function(e){o.searchnames=JSON.parse(e.data.object)})},o.searchSuggest=function(e){t.go("filmjoo",{movieid:e.data})},o.movies={},o.searchwords="",o.refreshMovies=function(e){if(0!==e.length)return o.searchwords=e,n.get("filmjoo/search/"+e).then(function(e){o.movies=JSON.parse(e.data.object)})},o.getclips=function(e){t.go("stuff",{searchtitle:e})},o.wronginformations=function(e){n.get("filmjoo/send_faulty/"+e).then(function(e){s.set(e.data.object,"success")})},o.morality=function(e){n.get("filmjoo/send_report/"+e).then(function(e){s.set(e.data.object,"warn")})},o.searchsubtitles=function(e,t){n.get("filmjoo/search_subtitle/"+e+"/"+t).then(function(e){e.data.object?o.subtitles=e.data.object:s.set("متاسفانه زیرنویسی یافت نشد","error")})}}])}(),function(){"use strict";angular.module("filmjoo").controller("FilmjooGetMovieController",["$scope","$http","$state","ngNotify","Settings","$stateParams",function(o,n,t,s,e,i){n.get("/filmjoo/get_movie/"+i.movieid).then(function(e){o.result=JSON.parse(e.data.object)}),o.getclips=function(e){t.go("stuff",{searchtitle:e})},o.wronginformations=function(e){n.get("filmjoo/send_faulty/"+e).then(function(e){s.set(e.data.object)})},o.morality=function(e){n.get("filmjoo/send_report/"+e).then(function(e){s.set(e.data.object)})},o.searchsubtitles=function(e,t){n.get("filmjoo/search_subtitle/"+e+"/"+t).then(function(e){o.subtitles=e.data.object})}}])}(),function(){"use strict";angular.module("stuff").factory("StuffImpl",["Stuff","$interval","$uibModal",function(e,t,o){return function(e,t){return{}}}])}(),function(){"use strict";angular.module("stuff").factory("Stuff",["UriManager",function(e){new e("stuff");return{}}])}(),function(){"use strict";angular.module("stuff").config(["$urlRouterProvider","$stateProvider","$locationProvider",function(e,t,o){e.otherwise("/"),t.state("stuff",{url:"/stuff/:searchtitle",templateUrl:"static/ui/modules/stuff/views/stuff-index.html",controller:"StuffController"})}])}(),function(){"use strict";angular.module("stuff").controller("StuffController",["$scope","StuffImpl","$http","$state","ngNotify","Settings","$stateParams",function(t,e,o,n,s,i,r){new e(t);r.searchtitle&&o.get("media/youtubeSearch/"+r.searchtitle).then(function(e){console.log(e.data.object),t.searchnames=JSON.parse(e.data.object)}),t.downloadit=function(e){i.session.url="http://www.youtube.com/watch?v="+e,n.go("media")},t.searchit=function(){n.go("stuff",{searchtitle:t.search})}}])}(),function(){"use strict";angular.module("stuff").factory("StuffImpl",["Stuff","$interval","$uibModal",function(e,t,o){return function(e,t){return{}}}])}(),function(){"use strict";angular.module("stuff").factory("Stuff",["UriManager",function(e){new e("stuff");return{}}])}(),function(){"use strict";angular.module("user").config(["$urlRouterProvider","$stateProvider","$locationProvider",function(e,t,o){e.otherwise("/"),t.state("user",{url:"/user",templateUrl:"static/ui/modules/user/views/user-index.html",controller:"UserController",resolve:{feedbacks:[function(){return[]}]}})}])}(),function(){"use strict";angular.module("user").controller("UserAddFeedbackController",["$scope","$uibModalInstance","UserImpl","Settings",function(e,t,o,n){var s=new o(e,t);e.model={},n.session&&n.session.feedbacktitle&&(e.feedbacktitle=n.session.feedbacktitle,n.session.feedbacktitle=null,e.feedbackmessage=n.session.feedbackmessage,n.session.feedbackmessage=null),e.dismissModal=s.dismissModal,e.addFeedback=s.addFeedback}])}(),function(){"use strict";angular.module("user").controller("UserPurchaseController",["$scope","$uibModalInstance","UserImpl",function(e,t,o){var n=new o(e,t);e.model={},e.purchase=n.purchase,e.dismissModal=n.dismissModal,e.addFeedback=n.addFeedback}])}(),function(){"use strict";angular.module("core").controller("UserSubscribeController",["$scope","$uibModalInstance","UserImpl","Upload","ngNotify","Settings","$state",function(e,t,o,n,s,i,r){var a=new o(e,t);e.model={},i.session.userurl&&(e.model.email=i.session.userurl,i.session.userurl=null),e.submit=function(){e.form.file.$valid&&e.file&&e.upload(e.file)},e.upload=function(e){n.upload({url:"user/newsletter",data:{file:e}}).then(function(e){console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data),"ok"==e.data.status?(s.set(e.data.message),t.close()):s.set(e.data.message,"error")},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);console.log("progress: "+t+"% "+e.config.data.file.name)})},e.dismissModal=a.dismissModal,e.subscribe=function(){a.subscribe()}}])}(),function(){"use strict";angular.module("user").controller("UserController",["$scope","UserImpl","feedbacks","uiGridConstants","ngNotify","Settings",function(e,t,o,n,s,i){var r=new t(e);e.model={},e.refresh=function(){r.getPagePremium(),r.getCredit()},e.feedbacks=r.feedback(),e.openSubscribeModal=r.openSubscribeModal,e.getPagePremium=r.getPagePremium,e.getPage=r.getPage,e.getCredit=r.getCredit,e.getPurchesList=r.getPurchesList,e.refresh(),i.session&&i.session.userurl&&r.openSubscribeModal()}])}(),function(){"use strict";angular.module("user").factory("UserImpl",["User","$interval","$uibModal","ngNotify",function(c,e,d,f){return function(t,o){function e(e){return c.downloadsHistory(e)}function n(e){return c.downloadsHistoryPremium(e)}function s(e){return c.downloadsPremiumPurchesPackage(e)}function i(){return c.premiumCredit()}var r={pageNumber:1,pageSize:25,sort:null},a=function(){t.listname="لیست خریدهای انجام شده",t.gridOptions={paginationPageSizes:[25,50,75],paginationPageSize:25,useExternalPagination:!0,useExternalSorting:!0,enableSorting:!1,enableColumnMenus:!1,columnDefs:[{field:"ppp_cost",name:"قیمت بسته خریداری شده"},{field:"ppp_size",name:"حجم بسته خریداری شده"},{field:"pud_created_time",name:"زمان خرید بسته"}],onRegisterApi:function(e){t.gridApi=e,t.gridApi.core.on.sortChanged(t,function(e,t){0==t.length?r.sort=null:r.sort=t[0].sort.direction,a()}),e.pagination.on.paginationChanged(t,function(e,t){r.pageNumber=e,r.pageSize=t,a()})}},s(r).then(function(e){if("ok"==e.status){t.gridOptions.totalItems=e.rowcount;r.pageNumber,r.pageSize;t.gridOptions.data=e.object}else f.set(e.message,"warn")})},l=function(){t.listname="لیست دانلود های ویژه",t.gridOptions={paginationPageSizes:[25,50,75],paginationPageSize:25,useExternalPagination:!0,useExternalSorting:!0,enableSorting:!1,enableColumnMenus:!1,columnDefs:[{field:"pud_link",name:"دانلود شما",cellTemplate:'<div class="ui-grid-cell-contents" ><a target="_blank" href="{{row.entity.pud_link}}">{{row.entity.pud_link}}</a></div>'},{field:"pud_folder_name",name:"مسیر فایلها",cellTemplate:'<div class="ui-grid-cell-contents" ><a target="_blank" href="{{row.entity.pud_folder_name}}">{{row.entity.pud_folder_name}}</a></div>'},{field:"pud_state",name:"وضعیت دانلود"},{field:"pud_size",name:"حجم دانلود"},{field:"pud_type",name:"نوع دانلود"},{field:"pud_Clinton_done_time",name:"نگه داری حداقل تا زمان"}],onRegisterApi:function(e){t.gridApi=e,t.gridApi.core.on.sortChanged(t,function(e,t){0==t.length?r.sort=null:r.sort=t[0].sort.direction,l()}),e.pagination.on.paginationChanged(t,function(e,t){r.pageNumber=e,r.pageSize=t,l()})}},n(r).then(function(e){if("ok"==e.status){t.gridOptions.totalItems=e.rowcount;r.pageNumber,r.pageSize;t.gridOptions.data=e.object}else f.set(e.message,"warn")})},u=function(){t.listname="لیست دانلودهای عادی",t.gridOptions={paginationPageSizes:[25,50,75],paginationPageSize:25,useExternalPagination:!0,useExternalSorting:!0,enableSorting:!1,enableColumnMenus:!1,columnDefs:[{field:"address",name:"آدرس",cellTemplate:'<div class="ui-grid-cell-contents" ><a target="_blank" href="{{row.entity.address}}">{{row.entity.address}}</a></div>'},{field:"date",name:"تاریخ"},{field:"title",name:"عنوان"}],onRegisterApi:function(e){t.gridApi=e,t.gridApi.core.on.sortChanged(t,function(e,t){0==t.length?r.sort=null:r.sort=t[0].sort.direction,u()}),e.pagination.on.paginationChanged(t,function(e,t){r.pageNumber=e,r.pageSize=t,u()})}},e(r).then(function(e){if("ok"==e.status){t.gridOptions.totalItems=e.rowcount;r.pageNumber,r.pageSize;t.gridOptions.data=e.object}else f.set(e.message,"warn")})};return{feedback:function(){var e=c.feedback(t.model);if("ok"==e.status)return e.object.History;console.log(e.message)},openSubscribeModal:function(){d.open({size:"sm",templateUrl:"static/ui/modules/user/views/user-subscribe-modal.html",controller:"UserSubscribeController"}).result.then(function(e){l()},function(){l()})},subscribe:function(){console.log("subscribe"),c.newsletter(t.model).then(function(e){if("ok"!=e.status)return f.set(e.message,"error"),void o.close(e);o.close(e),f.set(e.message)},function(e){f.set(resp.message,"error")})},dismissModal:function(){o.dismiss()},addFeedback:function(){c.feedback(t.model).then(function(e){"ok"==e.status?(alert("feedback was added"),f.set("بازخورد شما فرستاده  شد، از توجه شما متشکریم"),o.close(e)):console.log(e.message)},function(e){console.log(e)})},downloadsHistory:e,downloadsHistoryPremium:n,purchase:function(e){c.purchase({cost:e}).then(function(e){"ok"==e.status&&(window.location.assign(e.object),o.close(e))},function(e){console.log(e)})},premiumCredit:i,downloadsPremiumPurchesPackage:s,getCredit:function(){t.userCredit=0,i().then(function(e){"ok"==e.status&&(t.restCredit=e.restCredit,t.userUsage=e.userUsage,t.totalCredit=e.totalCredit)},function(e){console.log(e)})},getPage:u,getPagePremium:l,getPurchesList:a}}}])}(),function(){"use strict";angular.module("user").factory("User",["UriManager",function(e){var t=new e("user");return{feedback:function(e){return t.devResolve({method:"POST",path:["downloadsHistory"],data:e})},newsletter:function(e){return t.resolve({method:"POST",path:["newsletter"],data:e})},signUp:function(e){return t.resolve({method:"POST",path:["signup"],data:e})},reset:function(e){return t.resolve({method:"POST",path:["passRemeberStep3"],data:e})},passRemeber:function(e){return t.resolve({method:"POST",path:["passRemeber"],data:e})},login:function(e){return t.resolve({method:"POST",path:["login"],data:e})},downloadsHistory:function(e){return t.resolve({method:"POST",path:["filesList"],data:e})},downloadsHistoryPremium:function(e){return t.resolve({method:"POST",path:["premiumFilesList"],data:e})},downloadsPremiumPurchesPackage:function(e){return t.resolve({method:"POST",path:["purches_list"],data:e})},purchase:function(e){return t.resolve({method:"POST",path:["purchase"],data:e})},premiumCredit:function(e){return t.resolve({method:"POST",path:["premiumCredit"]})}}}])}();
//# sourceMappingURL=app.min.js.map
